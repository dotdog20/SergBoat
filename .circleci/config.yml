version: 1
jobs
    build:
        working_directory: ~/sboat-staging

        docker:
            - image: circleci/openjdk:8-jdk-browsers


        steps:

        - checkout

        - restore_cache:
            key: sboat-staging{{ checksum "pom.xml" }}

        - run: mvn dependency:go-offline

        - save_cache:
            paths:
                - ~/.m2
            key: sboat-staging{{ checksum "pom.xml" }}

        - run: mvn package
      
        - store_test_results:
            path: target/surefire-reports

        - store_artifacts:
            path: target/fredboat